(this.webpackJsonpSoftypeHR=this.webpackJsonpSoftypeHR||[]).push([[22],{1290:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),c=a(15),l=a(40),s=a(1),i=a.n(s),o=a(23),u=a(28),m=a(59),b=a(24),p=a(4),d=a(43),f=a(124),g=a.n(f),h=a(125),E=a(760),j=a(45),O=a(34);t.default=function(e){var t=Object(o.c)(),a=Object(s.useRef)(),n=e.match.params.type,f=Object(o.d)((function(e){return e.appState.files[n]})),k=Object(s.useState)(0),y=Object(l.a)(k,2),v=y[0],x=y[1],w=h.a.$blue,C=h.a.$orange,S=h.a.$green,F=h.a.$red,N=Object(s.useState)(!0),$=Object(l.a)(N,2),z=$[0],D=$[1],U=Object(s.useState)([]),H=Object(l.a)(U,2),L=H[0],R=H[1],_=Object(s.useState)(),I=Object(l.a)(_,2),J=I[0],q=I[1],A=[["info","primary","danger","success"],[w,C,F,S]],P=Object(s.useState)(0),T=Object(l.a)(P,2),B=T[0],G=T[1],K=function(){var e=Object(c.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=J["file id"],D(!0),e.next=4,b.a.post("/delete_file/".concat(a));case 4:if(n=e.sent,M(J.path),Object(u.g)(t,{type:"info",message:"Please wait."}),n.error){e.next=14;break}return e.next=10,Q();case 10:D(!1),Object(u.g)(t,{type:"success",message:"Success"}),e.next=15;break;case 14:Object(u.g)(t,{type:"error",message:n.message});case 15:q("");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){var t=Object(u.f)(L);t=t.filter((function(t){return t!==e})),R(t)},Q=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.toLowerCase(),e.next="videos"===e.t0?3:"images"===e.t0?8:"documents"===e.t0?13:"others"===e.t0?18:23;break;case 3:return G(2),x(2),e.next=7,Object(O.e)(t);case 7:return e.abrupt("break",24);case 8:return x(1),G(1),e.next=12,Object(O.d)(t);case 12:return e.abrupt("break",24);case 13:return x(0),G(0),e.next=17,Object(O.b)(t);case 17:return e.abrupt("break",24);case 18:return x(3),G(3),e.next=22,Object(O.c)(t);case 22:case 23:return e.abrupt("break",24);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){Q(),D(!1)}),[]),i.a.createElement(p.u,{fluid:!0},i.a.createElement(E.a,{type:n,isHidden:!0}),i.a.createElement(m.b,Object.assign({ref:a},{show:!0,onConfirm:function(){K()},title:"Confirm Delete"})),z?i.a.createElement(m.d,{bg:"rgba(255,255,255,0.5)"}):f&&!f.length?i.a.createElement(m.g,{title:"No Files"}):i.a.createElement(p.cb,null,f.map((function(e){var t=e.filename,r=e.description,c=e.path;L.includes(c);return i.a.createElement(p.s,{sm:"4",md:"3",lg:"3",key:e.path},i.a.createElement(p.h,{accentColor:A[0][B],style:{maxHeight:"220px"}},i.a.createElement(p.k,{className:"font-weight-bold text-truncate"},i.a.createElement("small",null," ",i.a.createElement("strong",null,t))),i.a.createElement(p.i,{style:{textAlign:"center"}},i.a.createElement(g.a,{path:j.h[v].icon,size:4,color:A[1][B]})),i.a.createElement(p.j,null,i.a.createElement("div",{className:"card-header-actions"},i.a.createElement(p.S,{className:"card-header-action",onClick:function(){!function(e){var t=document.createElement("a");t.style.display="none",t.href=e,t.target="_blank",document.body.appendChild(t),t.click()}("".concat(Object(u.m)(),"/file/").concat(n,"/").concat(c))}},i.a.createElement(g.a,{path:d.k,size:.9,color:"black"})),i.a.createElement(p.S,{className:"card-header-action",onClick:function(){var t;t=e,a.current.toggle(),q(t)}},i.a.createElement(g.a,{path:d.z,size:.8,color:"black"})),i.a.createElement(p.ab,{header:"File Information",content:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement("strong",null,"Filename :")," ",t),i.a.createElement("p",null,i.a.createElement("strong",null,"Description :")," ",r),i.a.createElement("p",null,i.a.createElement("strong",null,"Uploaded by :")," ",e["uploaded by"]),i.a.createElement("p",null,i.a.createElement("strong",null,"Date Uploaded :")," ",Object(u.j)(e["uploaded at"])))},i.a.createElement(p.S,{className:"card-header-action",onClick:function(){}},i.a.createElement(g.a,{path:d.t,size:.8,color:"black"})))))))}))))}},760:function(e,t,a){"use strict";var n=a(8),r=a.n(n),c=a(15),l=a(47),s=a(40),i=a(1),o=a.n(i),u=a(4),m=a(59),b=a(124),p=a.n(b),d=a(43),f=a(125),g=a(45),h=a(28),E=a(34),j=a(24),O=a(23);t.a=function(e){var t=e.isUpdate,a=void 0!==t&&t,n=e.isHidden,b=void 0!==n&&n,k=Object(O.c)(),y=Object(O.d)((function(e){return e.appState.auth.user.employeeId})),v=Object(i.useRef)(),x=Object(i.useRef)(),w=Object(i.useState)([]),C=Object(s.a)(w,2),S=C[0],F=C[1],N=Object(i.useState)(""),$=Object(s.a)(N,2),z=$[0],D=$[1],U=Object(i.useState)(!1),H=Object(s.a)(U,2),L=H[0],R=H[1],_=Object(i.useState)(""),I=Object(s.a)(_,2),J=I[0],q=I[1],A=Object(i.useState)([]),P=Object(s.a)(A,2),T=P[0],B=P[1],G=function(){L||(F(""),D(""),B([]))},K=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",S),t.append("description",z),t.append("type",J),t.append("employeeId",+y),Object(h.g)(k,{type:"info",message:"Uploading"}),R(!0),e.next=9,j.a.post("/add_file",t,!0);case 9:if(!(a=e.sent).error){e.next=15;break}B([a.message]),Object(h.g)(k,{type:"error",message:"Error in uploading file"}),e.next=30;break;case 15:e.t0=J,e.next="videos"===e.t0?18:"images"===e.t0?21:"documents"===e.t0?24:27;break;case 18:return e.next=20,Object(E.e)(k);case 20:return e.abrupt("break",30);case 21:return e.next=23,Object(E.d)(k);case 23:return e.abrupt("break",30);case 24:return e.next=26,Object(E.b)(k);case 26:return e.abrupt("break",30);case 27:return e.next=29,Object(E.c)(k);case 29:return e.abrupt("break",30);case 30:R(!1),M();case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){v.current.toggle()};return Object(i.useEffect)((function(){console.log(T)}),[T]),o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"btn  btn-primary fab",onClick:M},o.a.createElement(p.a,{size:2,path:d.y})),o.a.createElement(m.f,{ref:v,centered:!0,hidden:b,btnTitle:"Upload File",title:a?"Update":"New File",modalOnClose:G,footer:o.a.createElement(o.a.Fragment,null,o.a.createElement(m.e,{isLoading:L,submit:function(){var e=[];if(B([]),S&&0!==S.length||e.push("File is required."),z||e.push("Description is required."),z.trim().split(" ").length>50&&e.push("Descrition must not be greater than 50 characters."),B(Object(l.a)(new Set(e))),S!==[]&&z)return K()},btnText:"Upload"}),o.a.createElement(u.f,{color:"danger",onClick:function(){v.current.toggle(),G()}},"Cancel")),hideCancelButton:!0},T.length?o.a.createElement(u.a,{color:"danger justify-content-center text-align-center"},o.a.createElement("p",{style:{whiteSpace:"pre",margin:"0"}}," ",T.join("\r\n"))):null,o.a.createElement(u.cb,{className:"justify-content-center"},o.a.createElement(u.s,null,o.a.createElement(u.h,{style:{cursor:"pointer"},accentColor:T.some((function(e){return e.includes("file")}))||!S.length?"danger":S.length&&"info",onClick:function(){x.current.click()}},o.a.createElement(u.i,{style:{textAlign:"center"}},o.a.createElement(u.cb,null,o.a.createElement(u.s,null,o.a.createElement(p.a,{path:d.p,size:5,color:S?f.a.$blue:f.a.$grey_light}))),o.a.createElement(u.cb,null,o.a.createElement(u.s,null,o.a.createElement("span",{style:{color:S?f.a.$blue:f.a.$grey_light}},S?S.name:"click here to add a file","  "))))),o.a.createElement(u.J,{hidden:!0}))),o.a.createElement(u.cb,{className:"justify-content-center"},o.a.createElement("input",{type:"file",ref:x,hidden:!0,onChange:function(e){B([]);var t=e.target.files;if(t&&0!==t.length){var a=t[0];F(a);for(var n=Object(h.o)(a.name),r=0;r<g.h.length;r++){var c=g.h[r];if(c.extensions.includes(n.toLowerCase())){q(c.name.toLowerCase());break}q("others")}}else!function(e){if(!T.includes(e))B([].concat(Object(l.a)(T),[e]))}("Please attatch some file.")}}),o.a.createElement(u.s,null,o.a.createElement(u.rb,{value:z||"",placeholder:"Description (max is 50 words)",name:"description",rows:"4",invalid:T.some((function(e){return e.toLowerCase().includes("description")})),onChange:function(e){B([]),D(e.target.value)}})))))}}}]);
//# sourceMappingURL=22.1f9eeb72.chunk.js.map