(this.webpackJsonpSoftypeHR=this.webpackJsonpSoftypeHR||[]).push([[14,2,20,29],{1296:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),l=a(15),c=a(40),o=a(1),s=a.n(o),u=a(23),m=a(716),i=a.n(m),d=a(4),p=a(20),b=a(28),f=a(59),E=a(45),y=function(e){var t=e.show,a=e.onFilterRequests,n=e.filter,r=e.onClearFilter,l=e.isLoading,u=Object(o.useRef)(),m=Object(o.useState)(Object(b.w)(n)),i=Object(c.a)(m,2),p=i[0],y=i[1],g=function(e){var t=e.target.name,a=e.target.value,n=Object(b.w)(p);n[t]=a,y(n)};return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.b,Object.assign({ref:u,id:"cutom_dialog"},{centered:!1,title:"Invalid date range",cancelButtonText:"Ok",confirmButton:!1})),s.a.createElement(d.t,{show:t},s.a.createElement(d.u,{fluid:!0},s.a.createElement(d.cb,{className:"pt-4"},s.a.createElement(d.s,null,s.a.createElement(d.h,null,s.a.createElement(d.i,null,s.a.createElement(d.cb,null,s.a.createElement(d.s,Object(b.v)("4"),s.a.createElement(d.cb,{gutters:!1},s.a.createElement(d.s,Object.assign({className:"mr-1"},Object(b.v)("5")),s.a.createElement(d.E,null,s.a.createElement(d.R,{htmlFor:"date-input",className:"font-weight-bold"},s.a.createElement("span",null,"Month")),s.a.createElement(d.db,{custom:!0,className:"input-sm",size:"sm",disabled:l,name:"month",value:p.month||"",onChange:g},s.a.createElement("option",{value:"",hidden:!0},p.month),s.a.createElement("option",{value:"All"},"All"),E.k.map((function(e,t){return s.a.createElement("option",{key:t,value:e},e)}))))),s.a.createElement(d.s,{className:"ml-1"},s.a.createElement(d.E,null,s.a.createElement(d.R,{htmlFor:"date-input",className:"font-weight-bold"},s.a.createElement("span",null,"Year")),s.a.createElement(d.db,{custom:!0,disabled:l,className:"input-sm",size:"sm",name:"year",value:p.year||"",onChange:g},s.a.createElement("option",{value:"",hidden:!0},p.year),s.a.createElement("option",{value:"All"},"All"),E.s.map((function(e){return s.a.createElement("option",{key:e,value:Number(e)},e)}))))))),s.a.createElement(d.s,Object(b.v)("3"),s.a.createElement(d.E,null,s.a.createElement(d.R,{htmlFor:"status",className:"font-weight-bold"},s.a.createElement("span",null,"Status:")),s.a.createElement(d.db,{custom:!0,disabled:l,className:"input-sm",size:"sm",name:"status",id:"status",value:p.status||"all",onChange:g},s.a.createElement("option",{value:"",hidden:!0},"Select"),s.a.createElement("option",{value:"All"},"All"),Object.keys(E.q).map((function(e){return s.a.createElement("option",{key:e,value:e},e)}))))),s.a.createElement(d.s,Object(b.v)("3"),s.a.createElement(d.E,null,s.a.createElement(d.R,{htmlFor:"status",className:"font-weight-bold"},s.a.createElement("span",null,"Category:")),s.a.createElement(d.db,{custom:!0,disabled:l,name:"category",size:"sm",value:p.category||"",onChange:g,id:"category"},s.a.createElement("option",{value:"",hidden:!0},"Please select"),s.a.createElement("option",{value:"All"},"All"),E.j.map((function(e,t){return s.a.createElement("option",{key:t,value:e},e)}))))),s.a.createElement(d.s,Object(b.v)("2"),s.a.createElement(d.cb,{gutters:!1},s.a.createElement(d.s,null,s.a.createElement(d.E,{className:"my-0"},s.a.createElement(d.R,{htmlFor:"date-input",className:"font-weight-bold mb-1"}),s.a.createElement(f.e,{color:"info",className:"mt-2",sm:!0,block:!0,isLoading:l,submit:function(){a(p)},btnText:"apply"}))),s.a.createElement(d.s,{className:"ml-1"},s.a.createElement(d.E,{className:"my-0"},s.a.createElement(d.R,{htmlFor:"date-input",className:"font-weight-bold mb-1"}),s.a.createElement(d.f,{block:!0,size:"sm",color:"danger",disabled:l,className:"mt-2",onClick:function(){y(Object(b.w)(n)),r()}},"clear")))))))))))))},g=(a(71),a(72),{id:null,name:"",date_from:"",date_to:"",category:null,reason:"",status:"Pending",approver:"",employeeID:null,approverId:null}),v=a(5),h=a(34),O=a(24),j=a(64),_=a.n(j),w=function(e){var t=e.request,a="You have reached your maximum number of leave.",n={dates:!1,reason:!1,category:!1},m=Object(u.c)(),p=Object(u.d)((function(e){var t=e.appState.auth.user;return{firstname:t.firstname,lastname:t.lastname,employeeId:t.employeeId,userId:t.userId,remaining_leave:t.remaining_leave,accountType:t.accountType}})),y=Object(u.d)((function(e){return e.appState.employee.employees.filter((function(e){return e.employeeId===p.employeeId}))[0]})),j=Object(u.d)((function(e){return e.appState.employee.employees.filter((function(e){return 1===e.accountType}))})),w=y.department_id,N=y.department_head,k=y.department_headId,C=y.isHead,S=y.isManager,I=y.deparment_IdM,T=Object(u.d)((function(e){return e.appState.department.departments.filter((function(e){return e.department_id===w?w:I}))}));g.name="".concat(Object(b.z)(p.firstname)," ").concat(Object(b.z)(p.lastname)),g.employeeID=p.employeeId,g.approverId=3===p.accountType?k:1===p.accountType?p.employeeId:j[0].employeeId,g.approver=3===p.accountType?N:3===p.accountType&&null!==S?T[0].department_head:2===p.accountType?"".concat(j[0].firstname," ").concat(j[0].lastname):"".concat(p.firstname," ").concat(p.lastname);var R=Object(o.useRef)(),x=Object(o.useState)(t||g),q=Object(c.a)(x,2),D=q[0],F=q[1],L=Object(o.useState)(Object(b.d)(D.date_from,D.date_to)),A=Object(c.a)(L,2),z=A[0],P=A[1],M=Object(o.useState)(0),Y=Object(c.a)(M,2),V=Y[0],B=Y[1],J=Object(o.useState)(!1),H=Object(c.a)(J,2),U=H[0],G=H[1],Q=Object(o.useState)(n),W=Object(c.a)(Q,2),X=W[0],K=W[1],Z=Object(o.useState)(!1),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ae=Object(o.useState)(!1),ne=Object(c.a)(ae,2),re=ne[0],le=ne[1],ce=Object(o.useState)(""),oe=Object(c.a)(ce,2),se=oe[0],ue=oe[1],me=function(){te(!1),le(!1);var e=function(e){_()(e).isBefore(_()())&&(te(!1),P("Invalid date range"),le(!0))};if(""!==D.date_from&&e(D.date_from),""!==D.date_to&&e(D.date_to),""===D.date_from||""===D.date_to)return P(0);var t=Object(b.d)(D.date_from,D.date_to);if(t>0)return V<t&&(le(!1),te(!0)),P(t);P("Invalid date range"),te(!1),le(!0)},ie=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,l,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=D.category,a=D.date_from,l=D.date_to,c=D.reason,""!==t&&null!==t||(n.category=!0),(""===a||null===l||""===l||""===a||"Invalid date range"===z||ee)&&(n.dates=!0),""!==c&&null!==c||(se.length?de({target:{name:"reason",value:se}}):n.reason=!0),n.dates=pe,K(n),Object.values(n).includes(!0)||Ee();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(e){var t=e.target.name,a=e.target.value,r=Object(b.w)(D);(n=Object(b.w)(X))[t.includes("date_")?"dates":t]=!1,K(n),r[t]=a;var l="";r.category&&(l="I am having my ".concat(r.category," ").concat(r.date_from?"from "+_()(r.date_from).format("ll"):""," ").concat(r.date_to?"until "+_()(r.date_to).format("ll"):"")),r.reason.includes("I am having my ".concat(r.category))&&(r.reason=l),ue(l),me(),F(r)},pe=Object(o.useMemo)((function(){return z<=0||"Invalid date range"===z||z===a}),[z]),be=function(){F(g),n=i.a.mapValues(n,(function(){return!1})),K(n)},fe=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/checkRemainingLeave/".concat(p.employeeId));case 3:if(!(t=e.sent).error){e.next=6;break}return e.abrupt("return",Object(b.g)(m,{type:"error",message:t.message}));case 6:B(t.data.remaining_leave),0===t.data.remaining_leave&&(te(!0),P(a)),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",Object(b.g)(m,{type:"error",message:e.t0.toString()}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),3===p.accountType&&S&&(D.approverId=T[0].department_head_employeeId,D.approver=T[0].department_head),e.next=4,O.a.post("/create_request_leave",D);case 4:(t=e.sent).error?Object(b.g)(m,{type:"error",message:t.message}):(p.employeeId,p.roleId,Object(E.i)("All"),m(Object(v.b)(v.a.ADD_LEAVE_REQUEST,Object(b.r)(t.data[0]))),Object(h.n)(m),R.current.toggle(),be()),G(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){me(),fe()}),[D,P]);return s.a.createElement(f.f,Object.assign({ref:R},{title:"Request Leave",footer:s.a.createElement(s.a.Fragment,null,s.a.createElement(d.f,{color:"primary",disabled:U||ee||null===w&&null===S&&3===p.accountType||null===C&&2===p.accountType,onClick:ie},U?s.a.createElement(d.lb,{color:"secondary",size:"sm"}):"Submit")),modalOnClose:be,cancelBtnTitle:"Close",size:"lg"}),(ee||re)&&s.a.createElement(d.a,{color:"danger"},s.a.createElement(s.a.Fragment,null,re&&s.a.createElement(s.a.Fragment,null,s.a.createElement("strong",null,"Date Criteria : "),s.a.createElement("ul",null,s.a.createElement("li",null,"Start date must be later than today."),s.a.createElement("li",null,"Start date and End date must have difference for atleast 1 day."))),ee&&s.a.createElement("p",{style:{margin:"0"}},a))),s.a.createElement(d.a,{color:!w&&null===S&&3===p.accountType||null===C&&2===p.accountType?"danger":"info"},null===w&&null===S&&3===p.accountType||null===C&&2===p.accountType?"Leave requests is available for department employees only.":"You still have ".concat(p.remaining_leave," remaining leave.")),s.a.createElement(d.E,null,s.a.createElement(d.R,null,"Name : "),s.a.createElement(d.J,{id:"company",value:D.name,disabled:!0})),s.a.createElement(d.E,{row:!0,className:"my-0"},s.a.createElement(d.s,{xs:"6"},s.a.createElement(d.E,null,s.a.createElement(d.R,{htmlFor:"date-input"},"Date From : "),s.a.createElement(d.J,{type:"date",disabled:null===w&&null===S&&3===p.accountType||null===C&&2===p.accountType,id:"date-from",name:"date_from",value:D.date_from,onChange:de,invalid:X.dates,placeholder:"Date From"}))),s.a.createElement(d.s,{xs:"6"},s.a.createElement(d.E,null,s.a.createElement(d.R,{htmlFor:"date-input"},"Date To : "),s.a.createElement(d.J,{type:"date",id:"date-to",disabled:null===w&&null===S&&3===p.accountType||null===C&&2===p.accountType,onChange:de,name:"date_to",value:D.date_to,invalid:X.dates,placeholder:"Date To"})))),s.a.createElement(d.E,{row:!0,className:"my-0"},s.a.createElement(d.s,{xs:"6"},s.a.createElement(d.E,null,s.a.createElement(d.R,null,"No of Days : "),s.a.createElement(d.J,{id:"noofdays",value:z,disabled:!0}))),s.a.createElement(d.s,{xs:"6"},s.a.createElement(d.E,null,s.a.createElement(d.R,{htmlFor:"Category"},"Category : "),s.a.createElement(d.db,{custom:!0,name:"category",disabled:null===w&&null===S&&3===p.accountType||null===C&&2===p.accountType,invalid:X.category,value:D.category||"",onChange:de,id:"category"},s.a.createElement("option",{value:"",hidden:!0},"Please select"),E.j.map((function(e,t){return s.a.createElement("option",{key:t,value:e},e)})))))),s.a.createElement(d.E,null,s.a.createElement(d.R,{htmlFor:"textarea-input"},"Reason : "),s.a.createElement(d.rb,{onChange:de,name:"reason",disabled:null===w&&null===S&&3===p.accountType||null===C&&2===p.accountType,placeholder:se&&se,value:D.reason,invalid:X.reason,rows:"5"}),s.a.createElement(d.Q,{className:"help-block"},"Please provide a valid information")))},N=(a(758),a(759),a(214));a(53),t.default=function(e){var t=Object(u.c)(),a=e.history,n=e.location,m=new URLSearchParams(n.search),g=n.search.match(/page=([0-9]+)/,""),O=m.get("status"),j=Object(E.i)(O),k=Number(g&&g[1]?g[1]:1),C=Object(o.useState)(k),S=Object(c.a)(C,2),I=S[0],T=S[1],R=Object(o.useState)(!0),x=Object(c.a)(R,2),q=x[0],D=x[1],F=Object(o.useState)(!1),L=Object(c.a)(F,2),A=L[0],z=L[1],P=Object(o.useState)(j),M=Object(c.a)(P,2),Y=M[0],V=M[1],B=Object(o.useState)(!1),J=Object(c.a)(B,2),H=J[0],U=J[1],G=Object(o.useState)({id:null,status:"",statusCode:null,noOfDays:0}),Q=Object(c.a)(G,2),W=Q[0],X=Q[1],K=Object(o.useRef)(),Z=Object(o.useState)("emp_request"),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ae=Object(u.d)((function(e){return e.appState.leave.leave_requests})),ne=Object(u.d)((function(e){return e.appState.auth.user})),re=function(e,t){return e[Object(b.z)(t)]},le=function(e,t){a.push("/leave/requests?page=".concat(e,"&status=").concat(Y.status))},ce=function(){var e=Object(l.a)(r.a.mark((function e(a){var n,l,c,o,s,u,m,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(a),n=a.status,l=a.month,c=a.year,o=a.category,s=ne.employeeId,u=ne.roleId,m={month:l,year:c,status:n,category:o,employeeId:s,roleId:u},JSON.stringify(j)===JSON.stringify(a)){e.next=11;break}return z(!0),e.next=8,Object(h.n)(t,m);case 8:i=e.sent,z(!1),i.error?Object(b.g)(t,{type:"error",message:i.message}):t(Object(v.b)(v.a.FETCH_LEAVE_REQUEST,Object(b.q)(i.data.leave_requests)));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){return 0===ae.length&&D(!1),function(){}}),[ee]),s.a.createElement(d.cb,null,s.a.createElement(d.s,{xl:12},s.a.createElement(f.b,Object.assign({ref:K,id:"cutom_dialog"},{show:K,onConfirm:function(){return H?(t(Object(v.b)(v.a.TOGGLE_NOTIFICATION,{type:"info",message:"Please wait"})),Object(b.b)(t,W.id)):Object(b.s)(t,W)},title:H?"Cancel Request?":"".concat(W.statusCode?"Approve":"Reject")})),s.a.createElement(d.h,null,s.a.createElement(d.i,null,s.a.createElement(d.cb,null,s.a.createElement(d.s,{sm:"5"},3===ne.accountType?s.a.createElement("h4",{className:"card-title mb-0"},"My Leave Requests"):s.a.createElement(d.db,{custom:!0,className:"input-md",size:"md",name:"leavefilter",id:"leavefilter",value:ee,onChange:function(e){te(e.target.value)}},s.a.createElement("option",{value:"emp_request"},"Employee Leave Requests"),s.a.createElement("option",{value:"my_request"},"My Leave Requests"),")}")),s.a.createElement(d.s,{sm:"7",className:"d-sm-block"},1===ne.accountType&&"my_request"===ee||2===ne.accountType&&"my_request"===ee||3===ne.accountType?s.a.createElement("div",{className:"float-right mr-3"},s.a.createElement(w,null)):"",s.a.createElement("div",{className:"float-right mr-3 ".concat(!q&&"mb-2")},s.a.createElement(d.f,{color:"".concat(q?"secondary":"primary"),onClick:function(e){D(!q),e.preventDefault()},className:"mb-1"},q?"Hide":"Show "," Filter",s.a.createElement(p.b,{size:"sm",name:"".concat(q?"cil-chevron-top":"cil-chevron-bottom")}))))),s.a.createElement(d.cb,null,s.a.createElement(d.s,null,s.a.createElement(y,{filter:Y,onFilterRequests:ce,onClearFilter:function(){V(j),ce(j)},show:q,isLoading:A}))),s.a.createElement(d.w,{className:"table-responsive mt-2",items:3!==ne.accountType?i.a.filter(ae,["".concat("my_request"===ee?"employee id":"approver id"),ne.employeeId]):ae,fields:[{key:"name",_classes:"font-weight-bold"},"date from","date to",{key:"no of days",label:"Days",_style:{width:"1%"},sorter:!1,filter:!1},{key:"category",sorter:!1,filter:!1},{key:"reason",_style:{width:"20%"},sorter:!1,filter:!1},"status",{key:"actions",label:"Options",sorter:!1,filter:!1}],pagination:!0,sorter:!0,onPageChange:function(e){var t;T(t=e),k!==t&&le(t,Y.status)},activePage:I,noItemsViewSlot:s.a.createElement(N.a,null),clickableRows:!0,scopedSlots:{"no of days":function(e){return s.a.createElement("td",null," ",Object(b.n)(e["date from"],e["date to"]))},reason:function(e){return s.a.createElement("td",null,s.a.createElement("p",{className:"wrap-content-text"}," ",e.reason))},status:function(e){return s.a.createElement("td",null,s.a.createElement(d.b,{color:re(E.q,e.status)},e.status))},actions:function(e){var t="pending"===e.status.toLowerCase();return s.a.createElement("td",null,e["employee id"]===ne.employeeId&&t&&s.a.createElement(d.ab,{header:"cancel request"},s.a.createElement(d.S,{onClick:function(){X({id:e.id}),U(!0),K.current.toggle()},className:"card-header-action"},s.a.createElement(p.b,{name:"cil-trash",className:"text-danger"}))),s.a.createElement(d.ab,{header:"View Details"},s.a.createElement(d.S,{onClick:function(){return t=e.id,void a.push("/leave/requests/".concat(t));var t},className:"card-header-action"},s.a.createElement(p.b,{name:"cib-indeed",className:"text-dark "}),!t&&"View Details")),ne.roleId<3&&t&&"emp_request"===ee&&[{header:"Approve",code:1,color:"success",icon:"check"},{header:"Reject",code:0,color:"danger",icon:"x-circle"}].map((function(t,a){return s.a.createElement(d.ab,{header:t.header,key:a},s.a.createElement(d.S,{onClick:function(){var a=_()(e["date from"]).isBefore(_()());U(!1),X({noOfDays:Object(b.n)(a?Object(b.j)(new Date):e["date from"],e["date to"]),id:e.id,status:Object(b.k)(t.code),statusCode:t.code,approver:ne.employeeId,employeeId:e["employee id"]}),K.current.toggle()},className:"card-header-action"},s.a.createElement(p.b,{name:"cil-".concat(t.icon),className:"text-".concat(t.color)})))})))}}})))))}},719:function(e,t,a){"use strict";a.r(t);var n=a(40),r=a(1),l=a.n(r),c=a(4),o=a(71),s=a(72),u=a(74),m=a(73),i=(a(718),a(45)),d="PREV",p="NEXT",b=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).navigate=function(e){n.props.onNavigate(e)},n.handleChange=function(e){n.props.onView(n.props.clickable?e.target.value:"month")},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){if(this.props.clickable){var e=i.k[this.props.date.getMonth()],t=this.props.date.getFullYear();this.props.onMonthChange(e),this.props.onYearChange(t)}}},{key:"render",value:function(){var e=this.props,t=e.label,a=e.views,n=e.header,r=n.right,o=void 0===r||r,s=n.left,u=void 0===s||s;return l.a.createElement("div",{className:"rbc-toolbar"},u&&l.a.createElement("span",{className:"rbc-btn-group"},l.a.createElement("button",{type:"button",onClick:this.navigate.bind(null,d)},"Prev"),l.a.createElement("button",{type:"button",onClick:this.navigate.bind(null,p)},"Next")),l.a.createElement("span",{className:"rbc-toolbar-label"},t),o&&l.a.createElement(c.E,null,l.a.createElement(c.db,{custom:!0,onChange:this.handleChange},l.a.createElement("option",{value:"",hidden:!0},"month"),a.map((function(e,t){return l.a.createElement("option",{key:t,value:e},e)})))))}}]),a}(l.a.Component),f=function(e){var t=e.event,a=void 0===t?{}:t,n=a.employee,r=a.category,o=a.date_from,s=a.date_to;return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.h,null,l.a.createElement(c.i,{style:{overflowY:"auto"}},l.a.createElement("p",{className:"title"},"Name : ",l.a.createElement("strong",null,n)),l.a.createElement("p",{className:"title"},"Type : ",l.a.createElement("strong",null,r)),l.a.createElement("p",{className:"title"},"Start Date : ",l.a.createElement("strong",null,o)),l.a.createElement("p",{className:"title"},"End Date : ",l.a.createElement("strong",null,s)))))},E=a(59),y=a(751),g=a(64),v=a.n(g),h=Object(y.b)(v.a);t.default=function(e){var t=e.header,a=void 0===t?{right:!0,left:!0}:t,o=e.events,s=void 0===o?[]:o,u=e.style,m=void 0===u?{height:500}:u,i=e.onYearChange,d=e.onMonthChange,p=e.clickable,g=void 0===p||p,v=e.isLoading,O=void 0!==v&&v,j=Object(r.useRef)(),_=Object(r.useState)(),w=Object(n.a)(_,2),N=w[0],k=w[1];return l.a.createElement("div",null,l.a.createElement(E.f,Object.assign({title:"Leave Request Detais",centered:!0,closeButton:!0,hideCancelButton:!0,hidden:!0,size:"sm",noFooter:!0},{ref:j}),l.a.createElement(f,{event:N})),l.a.createElement(c.h,null,O&&l.a.createElement(c.a,{color:"info"},"Approved will be loaded soon. Please wait."),l.a.createElement(c.i,null,l.a.createElement(y.a,{localizer:h,events:s,popup:!0,startAccessor:"start",endAccessor:"end",selectable:!0,style:m,defaultView:"month",defaultDate:s.length?s[0].start:new Date(Date.now()),onSelectEvent:function(e){g&&(k(e),j.current.toggle())},components:{toolbar:function(e){return l.a.createElement(b,Object.assign({},e,{clickable:g,header:a,onMonthChange:d,onYearChange:i}))}}}))))}},758:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),l=a(15),c=a(40),o=a(1),s=a.n(o),u=a(719),m=a(45),i=a(24),d=a(23),p=(a(28),a(5));t.default=function(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),a=t[0],n=t[1],b=Object(o.useState)(m.e),f=Object(c.a)(b,2),E=f[0],y=f[1],g=Object(o.useState)(m.g),v=Object(c.a)(g,2),h=v[0],O=v[1],j=Object(o.useState)(!1),_=Object(c.a)(j,2),w=_[0],N=_[1],k=Object(d.c)(),C=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a,l,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={month:E,year:h,status:"approved",category:"All",roleId:1},N(!0),e.next=4,i.a.post("/filterLeaveRequest",t);case 4:a=e.sent,N(!1),a.error?k(Object(p.b)(p.a.TOGGLE_NOTIFICATION,{type:"error",message:"Error in fetching data"})):(l=a.data.leave_requests).length&&(c=l.map((function(e){var t=e.name,a=e.category,n=e.date_from,r=e.date_to;return{id:0,employee:t,category:a,reason:e.reason,title:"".concat(t," : ").concat(a," "),allDay:!0,date_from:n,date_to:r,start:new Date(n),end:new Date(r)}})),n(c));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){C()}),[h,E]),s.a.createElement(u.default,{events:a,isLoading:w,onMonthChange:y,onYearChange:O})}},759:function(e,t,a){"use strict";a.r(t);var n=a(40),r=a(1),l=a.n(r),c=a(4),o=(a(20),a(23)),s=a(28),u=a(59),m=Object(r.lazy)((function(){return Promise.all([a.e(1),a.e(2)]).then(a.bind(null,719))}));t.default=function(e){var t=e.match,a=Object(o.c)(),i=Object(o.d)((function(e){return e.appState.leave.leave_requests.filter((function(e){return e.id.toString()===t.params.id.toString()}))[0]})),d=Object(o.d)((function(e){return e.appState.auth.user})),p=Object(r.useState)(),b=Object(n.a)(p,2),f=b[0],E=b[1],y=Object(r.useState)(!1),g=Object(n.a)(y,2),v=g[0],h=g[1],O=Object(r.useRef)();if(!Object.keys(i).length)return l.a.createElement(u.g,null);var j=Object(s.w)(i);j=Object(s.p)(j,"no_of_days",Object(s.n)(j["date from"],j["date to"]),4);var _={start:new Date(j["date from"]),end:new Date(j["date to"]),title:j.category},w=j?Object.entries(j):[],N=function(e){h(!1);var t={id:j.id,approver:d.employeeId,status:Object(s.k)(e),statusCode:e,noOfDays:j["no of days"],employeeId:j["employee id"]};E(t),O.current.toggle()};return l.a.createElement(c.cb,null,l.a.createElement(u.b,Object.assign({ref:O},{show:O,onConfirm:function(){return v?Object(s.b)(a,j.id):Object(s.s)(a,f)},title:v?"Cancel Request?":"".concat(f&&f.status)})),l.a.createElement(c.s,{lg:6},l.a.createElement(c.h,{style:{maxHeight:500}},l.a.createElement(c.k,null,"Leave Request ID : ",t.params.id,"pending"===j.status&&3!==d.roleId&&l.a.createElement(c.g,{style:{float:"right"}},l.a.createElement(c.f,{color:"primary",onClick:function(){N(1)},className:"mr-2"},"Accept"),l.a.createElement(c.f,{onClick:function(){N(0)},color:"danger",className:"mr-2"},"Reject"),d.employeeId===j["employee id"]&&l.a.createElement(c.f,{onClick:function(){h(!0),O.current.toggle()},color:"warning"}," Cancel"))),l.a.createElement(c.i,{style:{overflowY:"auto"}},l.a.createElement("table",{className:"table table-hover ",style:{borderBottom:"1px solid grey"}},l.a.createElement("tbody",null,w.map((function(e,t){var a=Object(n.a)(e,2),r=a[0],c=a[1];return"id"!==r&&"employee id"!==r.toLowerCase()&&l.a.createElement("tr",{key:t.toString()},l.a.createElement("td",{className:"text-capitalize"},"  ","".concat(Object(s.y)(Object(s.x)(r)),":")),l.a.createElement("td",null,l.a.createElement("p",{className:"wrap-content-text",style:{minWidth:"100%"}}," ",c?l.a.createElement("strong",null,c):l.a.createElement("em",null,"NULL")," ")))}))))))),l.a.createElement(c.s,{lg:6,style:{minHeight:"500px"},className:"d-md-down-none"},l.a.createElement(m,{header:{right:!1,left:!1},style:{height:450},events:[_],clickable:!1})))}}}]);
//# sourceMappingURL=14.76622ea9.chunk.js.map