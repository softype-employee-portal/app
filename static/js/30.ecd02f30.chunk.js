(this.webpackJsonpSoftypeHR=this.webpackJsonpSoftypeHR||[]).push([[30],{1302:function(e,t,a){"use strict";a.r(t);var r=a(8),s=a.n(r),n=a(15),o=a(71),c=a(72),l=a(74),i=a(73),d=a(1),m=a.n(d),h=a(4),u=a(20),E=a(25),g=a(23),p=a(28),b=a(45),f=a(5),S=a(59),w=a(24),y=a(96),O=(a(40),a(849),a(53)),I=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={credentials:{username:O.a.IS_DEV?"ytorres1":"",password:O.a.IS_DEV?"yoltorres24!":""},camera:!1,changed:!1,isLoading:!1,error:"",cameraError:"",showError:!1},e.dialog=Object(d.createRef)(),e.handleChange=function(t){e.setState({changed:!0,showError:!1,error:""});var a=Object(p.w)(e.state.credentials);a[t.target.name]=t.target.value,e.setState({credentials:a})},e.toggleDialog=function(){e.dialog.current.toggle()},e.loginAttempt=Object(n.a)(s.a.mark((function t(){var a,r,n,o,c,l,i,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({showError:!1}),e.props.already_logged){t.next=13;break}if(a=e.props,r=a.dispatch,n=a.history,""!==e.state.credentials.password&&""!==e.state.credentials.username){t.next=6;break}return e.setState({showError:!0,error:b.b.INPUT_REQUIRED}),t.abrupt("return");case 6:return e.setState({isLoading:!0}),r(Object(f.b)(f.a.FETCH_PROFILE_PENDING)),t.next=10,w.a.post("/login",e.state.credentials);case 10:o=t.sent,e.setState({isLoading:!1}),o.error?(e.setState({error:o.message,showError:!0}),e.setState({isLoading:!1})):(c=o.data,l=c.access_token,(i=c.account_information).length&&(d=i[0]),d||(e.setState({showError:!0,error:b.b.INPUT_REQUIRED}),e.setState({error:"Invalid Credentials",showError:!0}),e.setState({isLoading:!1})),localStorage.setItem("token",l),localStorage.setItem("uId",d.userId),r(Object(f.b)(f.a.FETCH_PROFILE_SUCCESS,i[0])),r(Object(f.b)(f.a.FETCH_LEAVE_REQUEST)),r(Object(f.b)(f.a.LOGIN)),n.replace("/"));case 13:case"end":return t.stop()}}),t)}))),e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;sessionStorage.clear(),this.props.already_logged||Object(p.c)().then((function(){e.setState({camera:!0})})).catch((function(t){e.setState({cameraError:t.cameraError,camera:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.showError,r=t.error;return this.props.already_logged?m.a.createElement(E.a,{to:"/dashboard"}):(sessionStorage.clear(),m.a.createElement(y.e,null,m.a.createElement(S.b,Object.assign({id:"cutom_dialog",ref:this.dialog},{confirmButton:!1,title:this.state.cameraError,cancelButtonText:"Ok"})),m.a.createElement(h.D,null,m.a.createElement("h2",null,"Welcome Back"),m.a.createElement("p",{className:"text-muted"},"Sign In to your account"),a&&m.a.createElement(h.a,{color:"danger",className:"text-center"},r),m.a.createElement(h.M,{className:"mb-3"},m.a.createElement(h.O,null,m.a.createElement(h.P,null,m.a.createElement(u.b,{name:"cil-user"}))),m.a.createElement(h.J,{type:"text",value:this.state.credentials.username||"",placeholder:"email/username",disabled:this.state.isLoading,name:"username",autoComplete:"email",invalid:""===this.state.credentials.username&&this.state.changed,onChange:this.handleChange}),m.a.createElement(h.Q,{className:"help-block"},b.b.INPUT_REQUIRED)),m.a.createElement(h.M,{className:"mb-4"},m.a.createElement(h.O,null,m.a.createElement(h.P,null,m.a.createElement(u.b,{name:"cil-lock-locked"}))),m.a.createElement(h.J,{type:"password",value:this.state.credentials.password||"",placeholder:"Password",name:"password",autoComplete:"current-password",disabled:this.state.isLoading,onChange:this.handleChange,invalid:""===this.state.credentials.password&&this.changed}),m.a.createElement(h.Q,{className:"help-block"},b.b.INPUT_REQUIRED)),m.a.createElement(h.f,{block:!0,onClick:this.loginAttempt,disabled:this.state.isLoading||""===this.state.credentials.password||""===this.state.credentials.email,color:"primary",className:"px-4"},this.state.isLoading?m.a.createElement(h.lb,{color:"secondary",size:"sm"}):"Login"),m.a.createElement("hr",{className:"hr-text","data-content":"OR"}),m.a.createElement(h.f,{block:!0,className:"float-center",color:"primary",variant:"outline",disabled:this.state.isLoading,onClick:function(){e.props.history.push("/account-recovery")}},"Forgot password"))))}}]),a}(d.Component);t.default=Object(g.b)((function(e){return{already_logged:e.appState.auth.already_logged}}))(I)}}]);
//# sourceMappingURL=30.ecd02f30.chunk.js.map