(this.webpackJsonpSoftypeHR=this.webpackJsonpSoftypeHR||[]).push([[18],{1300:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),c=a(15),m=a(40),o=a(1),l=a.n(o),d=a(4),p=a(59),u=a(23),i=function(e){var t=e.employees,a=e.onChange,n=e.data,r=e.renderFeedback,c=e.errors,p=Object(o.useState)(t),i=Object(m.a)(p,2),s=i[0],f=(i[1],Object(u.d)((function(e){return e.appState.department_manager.department_managers}))),b=Object(u.d)((function(e){return e.appState.department.departments})),h=s.filter((function(e){return!function(e){if(b.length<1&&2!==e.accountType)return!0;if(f<1)for(var t=0;t<b.length;t++){var a=b[t];if(2!==e.accountType||a.department_head_employeeId===e.employeeId)return!0}for(var n=0;n<f.length;n++)for(var r=f[n],c=0;c<b.length;c++){var m=b[c];if(r.department_head===e.name||e.employeeId===r.employeeId||2!==e.accountType||m.department_head_employeeId===e.employeeId)return!0}return!1}(e)}));return l.a.createElement(d.cb,null,l.a.createElement(d.s,{xl:12},l.a.createElement(d.E,null,l.a.createElement(d.R,null,"Department Name : "),l.a.createElement(d.J,{id:"department_name",name:"department_name",placeholder:"e.g Technical",onChange:a,value:n.department_name,invalid:!1!==c.department_name}),r(c.department_name)),l.a.createElement(d.E,null,l.a.createElement(d.R,null,"Department Head : "),l.a.createElement(d.db,{name:"department_head",id:"department_head",onChange:a,value:Number(n.department_head),invalid:!1!==c.department_head,disabled:0===h.length},l.a.createElement("option",{key:"default",value:"",hidden:!0},0===h.length?"No Employee can be added":"Select Employee"),h.map((function(e,t){return l.a.createElement("option",{key:"emp_"+t,value:e.employeeId},e.name," : ",e.role)}))),r(c.department_head))))},s=a(761),f=a(28),b=a(45),h=a(5),y=a(24),g=a(716),_=a.n(g),E=a(25),O=a(124),j=a.n(O),v=a(43),I=a(125),k=a(34);t.default=function(e){var t={department_name:!1,department_head:!1},a=Object(u.d)((function(e){return e.appState.employee.employees.map((function(e){return{name:"".concat(e.firstname," ").concat(e.lastname),employeeId:e.employeeId,accountType:e.accountType,role:e.role}}))})),n=Object(u.d)((function(e){var t=e.appState.auth.user;return{firstname:t.firstname,lastname:t.lastname,employeeId:t.employeeId,userId:t.userId,accountType:t.accountType}})),g=Object(E.g)(),O=Object(u.c)(),S=Object(o.useRef)(),T=Object(o.useState)(s.a),x=Object(m.a)(T,2),w=x[0],C=x[1],D=Object(o.useState)(!1),R=Object(m.a)(D,2),N=R[0],F=R[1],z=Object(o.useState)(t),A=Object(m.a)(z,2),H=A[0],J=A[1],M=Object(u.d)((function(e){return e.appState.department.departments})),P=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F(!0),0!==_.a.filter(M,(function(e){return e.department_name.toLowerCase().trim()===w.department_name.toLowerCase().trim()})).length){e.next=10;break}return Object(f.g)(O,{type:"info",message:"Please wait"}),e.next=6,y.a.post("/add_department",{name:w.department_name,department_head:+w.department_head});case 6:(t=e.sent).error?Object(f.g)(O,{type:"error",message:t.message}):(Object(f.g)(O,{type:"success",message:"Success"}),O(Object(h.b)(h.a.ADD_DEPARTMENT,t.data.department[0])),Object(k.m)(O),Object(k.g)(O),Object(k.h)(O),q()),e.next=11;break;case 10:Object(f.g)(O,{type:"error",message:"Department is Existed!"});case 11:F(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){C(s.a),J(t),S.current.toggle()};return l.a.createElement(l.a.Fragment,null,0===M.length&&1!==n.accountType?l.a.createElement(p.g,{title:"No Department/s added yet"}):l.a.createElement(d.cb,null,M.map((function(e,t){return l.a.createElement(d.s,{sm:"6",lg:"3",key:e.department_id+"crd"},l.a.createElement(p.a,{color:b.c[t],clickable:!0,animation:!0,centeredText:!0,height:200,text:e.department_name,textClass:"blockqoute text-white font-weight-bold h2 text-center",onClickMethod:function(){var t;t=e.department_id,sessionStorage.setItem("deptId",t),g.push("/employee/departments/department?id=".concat(t))}}))})),1===n.accountType?l.a.createElement(d.s,{sm:"6",lg:"3"},l.a.createElement(p.f,{ref:S,centered:!0,title:"Add Department",modalOnClose:q,hidden:!0,closeButton:!0,footer:l.a.createElement(l.a.Fragment,null,l.a.createElement(d.f,{color:"primary",disabled:N,onClick:function(){var e=Object(f.w)(H);Object.entries(w).map((function(t){var a=Object(m.a)(t,2),n=a[0],r=function(e,t){var a=f.a.required;return"department_name"===e?(M.filter((function(t){return e===t.department_name})),a(t)):"department_head"===e?a(t):""!==t||b.b.INPUT_REQUIRED}(n,a[1]);e[n]=!0!==r&&r})),J(e);var t=!0;_.a.values(e).map((function(e){!1!==e&&(t=!1)})),t&&P()}},N?l.a.createElement(d.lb,{color:"secondary",size:"sm"}):"Submit"))},l.a.createElement(i,{employees:a,onChange:function(e){var t=e.target.name,a=e.target.value,n=Object(f.w)(w);n[t]=a,C(n)},data:w,renderFeedback:function(e){return!1!==e&&l.a.createElement(d.Q,{className:"help-block"},e)},errors:H})),l.a.createElement(p.a,{text:l.a.createElement(j.a,{path:v.y,size:4,horizontal:!0,vertical:!0,rotate:180,color:I.a.$grey}),animation:!0,isIcon:!0,clickable:!0,centeredText:!0,height:200,onClickMethod:q})):""))}},761:function(e,t,a){"use strict";a(71);t.a={department_head:null,department_name:""}}}]);
//# sourceMappingURL=18.1e5303eb.chunk.js.map