(this.webpackJsonpSoftypeHR=this.webpackJsonpSoftypeHR||[]).push([[19,2],{1303:function(e,t,a){"use strict";a.r(t);var n=a(8),c=a.n(n),l=a(15),r=a(40),o=a(1),s=a.n(o),u=a(4),i=a(23),m=a(28),d=a(59),p=a(25),f=a(716),b=a.n(f),E=a(64),y=a.n(E),h=a(45),v=function(e){e.id,e.name;var t=e.person_in_charge,a=(void 0===t&&e["person in charge"],e.item,e.quantity,e.description,e.status,e.remarks,e.date_requested),n=(void 0===a&&e["date requested"],e.resolved_date),c=(void 0===n&&e["resolve date"],Object.entries(e));return s.a.createElement(u.cb,null,s.a.createElement(u.s,null,s.a.createElement(u.i,null,s.a.createElement("table",{className:"table table-hover ",style:{borderBottom:"1px solid grey"}},s.a.createElement("tbody",null,c.map((function(e,t){var a=Object(r.a)(e,2),n=a[0],c=a[1];return null!==c&&"id"!==n&&""!==c&&s.a.createElement("tr",{key:t.toString()},s.a.createElement("td",{className:"text-capitalize"},"  ","".concat(Object(m.y)(Object(m.x)(n)),":")),s.a.createElement("td",null,s.a.createElement("b",null,s.a.createElement("p",null,function(e,t){return"status"===e.toLowerCase()?0===t?"Closed":"Open":"date requested"===e.toLowerCase()?Object(m.j)(new Date(t)):t}(n,c)))))})))))))},g=a(24),O=a(5),j=a(34),w=a(719),k=Object(o.lazy)((function(){return a.e(25).then(a.bind(null,1304))}));t.default=function(){var e=Object(o.useRef)(),t=Object(i.c)(),a=Object(o.useRef)(),n=[{key:"name",_style:{width:"25%"}},{key:"date from",_style:{width:"20%"}},{key:"date to",_style:{width:"20%"}},{key:"reason",_style:{width:"20%"}}],f=function(e){switch(e){case"Approved":return"success";case"Pending":return"primary";case"Rejected":return"danger";default:return"primary"}},E=Object(i.d)((function(e){var t=e.appState.auth.user;return{firstname:t.firstname,lastname:t.lastname,employeeId:t.employeeId,userId:t.userId,accountType:t.accountType,remainingLeave:t.remaining_leave}})),S=Object(o.useState)(h.f+1),C=Object(r.a)(S,2),_=C[0],R=(C[1],Object(o.useState)("".concat(_,"-").concat(h.d.toString()))),q=Object(r.a)(R,2),N=q[0],I=(q[1],Object(i.d)((function(e){return e.appState.employee.employees.filter((function(e){return e.birthdate.substring(5,10)===N}))}))),T=Object(i.d)((function(e){return e.appState.employee.employees.filter((function(e){return 1===e.isActive}))})),L=Object(i.d)((function(e){return e.appState.leave.leave_requests.filter((function(e){return"pending"===e.status&&e["approver id"]===E.employeeId}))})),B=Object(i.d)((function(e){return e.appState.ticket.ticket_requests.filter((function(e){return 1===e.status}))})),D=Object(i.d)((function(e){return e.appState.leave.leave_requests.filter((function(e){return y()().isBetween(e["date from"],e["date to"])&&e.status.toLowerCase()==="approved".toLowerCase()}))})),P=Object(i.d)((function(e){return e.appState.leave.leave_requests.filter((function(e){return e.status.toLowerCase()==="pending".toLowerCase()&&e["approver id"]===E.employeeId}))})),A=Object(i.d)((function(e){return e.appState.ticket.ticket_requests.filter((function(e){return 1===e.status}))})),z=Object(p.g)(),V=Object(o.useState)(T.length),x=Object(r.a)(V,2),Y=x[0],F=(x[1],Object(o.useState)(D.length)),M=Object(r.a)(F,2),H=M[0],J=(M[1],Object(o.useState)(P.length)),K=Object(r.a)(J,2),U=K[0],X=(K[1],Object(o.useState)(A.length)),G=Object(r.a)(X,2),Q=G[0],W=(G[1],Object(o.useState)(L)),Z=Object(r.a)(W,2),$=Z[0],ee=(Z[1],Object(o.useState)(B)),te=Object(r.a)(ee,2),ae=te[0],ne=(te[1],Object(o.useState)()),ce=Object(r.a)(ne,2),le=ce[0],re=ce[1],oe=Object(o.useState)(!1),se=Object(r.a)(oe,2),ue=se[0],ie=se[1],me=Object(o.useState)(!1),de=Object(r.a)(me,2),pe=de[0],fe=de[1],be=Object(i.d)((function(e){return e.appState.leave.leave_requests})),Ee=Object(i.d)((function(e){return e.appState.department_employee.department_employees.filter((function(e){return e.employeeId===E.employeeId||e.department_managerEmployeeId===E.employeeId}))})),ye=Object(o.useState)(be),he=Object(r.a)(ye,2),ve=he[0],ge=(he[1],Object(o.useState)(Ee)),Oe=Object(r.a)(ge,2),je=Oe[0],we=(Oe[1],Object(o.useState)(h.e)),ke=Object(r.a)(we,2),Se=ke[0],Ce=ke[1],_e=Object(o.useState)(h.g),Re=Object(r.a)(_e,2),qe=Re[0],Ne=Re[1],Ie=function(){z.push("/leave/requests")},Te=function(){z.push("/requests")},Le=function(e){z.push("/leave/requests/".concat(e))},Be=function(e,t){return e[t]},De=function(){var e=Object(l.a)(c.a.mark((function e(){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={officeRequestId:le.id,employeeId:E.employeeId,indicator:pe?1:0},Object(m.g)(t,{type:"info",message:"Please wait"}),e.next=4,g.a.post("/close_officeRequest",a);case 4:(n=e.sent).error?Object(m.g)(t,{type:"error",message:n.message}):(t(Object(O.b)(O.a.CLOSE_TICKET,Object(m.r)(n.data.officeRequest_information[0]))),Object(j.k)(t),Object(m.g)(t,{type:"success",message:"Success"})),fe(!1),ie(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(t){re(t),e.current.toggle()};return Object(o.useEffect)((function(){}),[Y,$,ae,H,U,Q,ve,qe,Se,je,I]),s.a.createElement(s.a.Fragment,null,s.a.createElement(k,{user:E,totalEmployees:Y,viewLeaveRequests:Ie,viewOfficeRequests:Te,viewEmployees:function(){z.push("/employees")},viewLeaveCalendar:function(){z.push("/leave/calendar")},employeesOnLeave:H,pendingLeaveRequests:U,todaysPendingOfficeRequests:Q,viewDepartmentInfo:function(e){sessionStorage.setItem("deptId",e),z.push("/employee/departments/department?id=".concat(e))},employeeDepartment:je,stateBirthdayEmployees:I}),3!==E.accountType?s.a.createElement(u.cb,null,s.a.createElement(u.s,null,s.a.createElement(u.h,null,s.a.createElement(u.k,null,s.a.createElement(u.cb,null,s.a.createElement(u.s,{sm:"6"},s.a.createElement("div",null,"Employees on Leave")))),s.a.createElement(u.i,null,s.a.createElement(u.w,{items:b.a.orderBy(D,["created at"],["desc"]),fields:n,hover:!0,clickableRows:!0,pagination:!0,itemsPerPage:5,noItemsViewSlot:s.a.createElement(d.g,{title:"No Employee/s on Leave"}),onRowClick:function(e){Le(e.id)},scopedSlots:{status:function(e){return s.a.createElement("td",null,s.a.createElement(u.b,{color:f(e.status)},Object(m.z)(e.status)))}}}))))):"",s.a.createElement(u.cb,null,s.a.createElement(u.s,null,s.a.createElement(d.b,Object.assign({ref:a},{show:a,centered:!0,onConfirm:De,title:"".concat(pe?"Approve":ue?"Reject":""," request?"),onCloseCallback:function(){e.current.toggle(),fe(!1),ie(!1)}})),s.a.createElement(d.f,{ref:e,centered:!0,title:"Request Details",modalOnClose:Pe,hidden:!0,closeButton:!0,footer:le&&1===le.status&&s.a.createElement(s.a.Fragment,null,s.a.createElement(u.f,{color:"success",onClick:function(){fe(!0),e.current.toggle(),a.current.toggle()}},"Approve"),s.a.createElement(u.f,{color:"danger",onClick:function(){ie(!0),e.current.toggle(),a.current.toggle()}},"Reject")),hideCancelButton:!0},s.a.createElement(v,le)),s.a.createElement(u.h,null,s.a.createElement(u.k,null,s.a.createElement(u.cb,null,s.a.createElement(u.s,{sm:"6"},s.a.createElement("div",null,1===E.accountType||2===E.accountType?"Recent Leave Requests":3===E.accountType?"Employees on Leave":"")),1===E.accountType||2===E.accountType?s.a.createElement(u.s,{sm:"6",className:"d-none d-md-block"},s.a.createElement("div",{className:"float-right"},s.a.createElement(u.f,{size:"sm",color:"primary",onClick:function(){Ie()},disabled:!1},"View All"))):"")),s.a.createElement(u.i,null,s.a.createElement(u.w,{items:2===E.accountType||1===E.accountType?b.a.orderBy($,["created at"],["desc"]).slice(0,5):3===E.accountType?b.a.orderBy(D,["created at"],["desc"]):[],fields:2===E.accountType||1===E.accountType?[{key:"name",_style:{width:"25%"}},{key:"date from",_style:{width:"20%"}},{key:"date to",_style:{width:"20%"}},{key:"status",_style:{width:"5%"}}]:3===E.accountType?n:[],hover:!0,clickableRows:!0,pagination:!0,itemsPerPage:5,noItemsViewSlot:s.a.createElement(d.g,{title:3===E.accountType?"No Employee/s on Leave":"No Requests"}),onRowClick:function(e){Le(e.id)},scopedSlots:{status:function(e){return s.a.createElement("td",null,s.a.createElement(u.b,{color:f(e.status)},Object(m.z)(e.status)))}}})))),1===E.accountType?s.a.createElement(u.s,null,s.a.createElement(u.h,null,s.a.createElement(u.k,null,s.a.createElement(u.cb,null,s.a.createElement(u.s,{sm:"6"},s.a.createElement("div",null,"Recent Office Requests")),s.a.createElement(u.s,{sm:"6",className:"d-none d-md-block"},s.a.createElement("div",{className:"float-right"},s.a.createElement(u.f,{size:"sm",color:"primary",onClick:function(){Te()},disabled:!1},"View All"))))),s.a.createElement(u.i,null,s.a.createElement(u.w,{items:b.a.orderBy(ae,["date requested"],["desc"]).slice(0,5),fields:[{key:"name",_style:{width:"25%"}},{key:"item",_style:{width:"20%"}},{key:"date needed",_style:{width:"20%"}},{key:"status",_style:{width:"5%"}}],hover:!0,clickableRows:!0,noItemsViewSlot:s.a.createElement(d.g,{title:"No Requests"}),onRowClick:Pe,scopedSlots:{status:function(e){return s.a.createElement("td",null,s.a.createElement(u.b,{color:Be(h.r,e.status)},1===e.status?"Open":"Closed"))}}})))):s.a.createElement(u.s,null,s.a.createElement(w.default,{onMonthChange:Ce,onYearChange:Ne,style:{height:400},header:{right:!0,left:!0}}))))}},719:function(e,t,a){"use strict";a.r(t);var n=a(40),c=a(1),l=a.n(c),r=a(4),o=a(71),s=a(72),u=a(74),i=a(73),m=(a(718),a(45)),d="PREV",p="NEXT",f=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).navigate=function(e){n.props.onNavigate(e)},n.handleChange=function(e){n.props.onView(n.props.clickable?e.target.value:"month")},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){if(this.props.clickable){var e=m.k[this.props.date.getMonth()],t=this.props.date.getFullYear();this.props.onMonthChange(e),this.props.onYearChange(t)}}},{key:"render",value:function(){var e=this.props,t=e.label,a=e.views,n=e.header,c=n.right,o=void 0===c||c,s=n.left,u=void 0===s||s;return l.a.createElement("div",{className:"rbc-toolbar"},u&&l.a.createElement("span",{className:"rbc-btn-group"},l.a.createElement("button",{type:"button",onClick:this.navigate.bind(null,d)},"Prev"),l.a.createElement("button",{type:"button",onClick:this.navigate.bind(null,p)},"Next")),l.a.createElement("span",{className:"rbc-toolbar-label"},t),o&&l.a.createElement(r.E,null,l.a.createElement(r.db,{custom:!0,onChange:this.handleChange},l.a.createElement("option",{value:"",hidden:!0},"month"),a.map((function(e,t){return l.a.createElement("option",{key:t,value:e},e)})))))}}]),a}(l.a.Component),b=function(e){var t=e.event,a=void 0===t?{}:t,n=a.employee,c=a.category,o=a.date_from,s=a.date_to;return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.h,null,l.a.createElement(r.i,{style:{overflowY:"auto"}},l.a.createElement("p",{className:"title"},"Name : ",l.a.createElement("strong",null,n)),l.a.createElement("p",{className:"title"},"Type : ",l.a.createElement("strong",null,c)),l.a.createElement("p",{className:"title"},"Start Date : ",l.a.createElement("strong",null,o)),l.a.createElement("p",{className:"title"},"End Date : ",l.a.createElement("strong",null,s)))))},E=a(59),y=a(751),h=a(64),v=a.n(h),g=Object(y.b)(v.a);t.default=function(e){var t=e.header,a=void 0===t?{right:!0,left:!0}:t,o=e.events,s=void 0===o?[]:o,u=e.style,i=void 0===u?{height:500}:u,m=e.onYearChange,d=e.onMonthChange,p=e.clickable,h=void 0===p||p,v=e.isLoading,O=void 0!==v&&v,j=Object(c.useRef)(),w=Object(c.useState)(),k=Object(n.a)(w,2),S=k[0],C=k[1];return l.a.createElement("div",null,l.a.createElement(E.f,Object.assign({title:"Leave Request Detais",centered:!0,closeButton:!0,hideCancelButton:!0,hidden:!0,size:"sm",noFooter:!0},{ref:j}),l.a.createElement(b,{event:S})),l.a.createElement(r.h,null,O&&l.a.createElement(r.a,{color:"info"},"Approved will be loaded soon. Please wait."),l.a.createElement(r.i,null,l.a.createElement(y.a,{localizer:g,events:s,popup:!0,startAccessor:"start",endAccessor:"end",selectable:!0,style:i,defaultView:"month",defaultDate:s.length?s[0].start:new Date(Date.now()),onSelectEvent:function(e){h&&(C(e),j.current.toggle())},components:{toolbar:function(e){return l.a.createElement(f,Object.assign({},e,{clickable:h,header:a,onMonthChange:d,onYearChange:m}))}}}))))}}}]);
//# sourceMappingURL=19.7ba2a3e9.chunk.js.map